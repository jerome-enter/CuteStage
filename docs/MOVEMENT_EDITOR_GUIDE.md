# 🚶 이동 편집 영역 사용 가이드

## 📋 목차

- [개요](#개요)
- [화면 구성](#화면-구성)
- [기본 사용법](#기본-사용법)
- [미니맵 사용법](#미니맵-사용법)
- [타임라인 참고](#타임라인-참고)
- [팁과 요령](#팁과-요령)

---

## 📖 개요

**이동 편집 영역**은 비트(Beat) 내에서 캐릭터들의 위치 이동을 정의하는 곳입니다.  
무대에서 캐릭터가 언제, 어디로 이동할지 설정할 수 있습니다.

### 주요 기능

- ✅ 캐릭터별 이동 경로 설정
- ✅ 시간별 위치 지정
- ✅ 미니맵을 통한 직관적 위치 선택
- ✅ 대사 타임라인과 연동
- ✅ 자동 걷기 애니메이션

---

## 🖼️ 화면 구성

### 전체 레이아웃

```
┌─────────────────────────────────────────────────┐
│ 이동 레이어 탭                                   │
├─────────────────────────────────────────────────┤
│                                                 │
│ 📦 이동 목록 (스크롤 가능)                      │
│ ┌─────────────────────────────────────────┐   │
│ │ 철수 🚶 2.5초                            │   │
│ │ 위치: (50%, 30%)                         │   │
│ │ 자동 걷기 애니메이션                      │   │
│ └─────────────────────────────────────────┘   │
│                                                 │
│ ┌─────────────────────────────────────────┐   │
│ │ 영희 🚶 5.0초                            │   │
│ │ 위치: (70%, 60%)                         │   │
│ └─────────────────────────────────────────┘   │
│                                                 │
│ ┌─────────────────────────────────────────┐   │
│ │        ➕ 이동 추가                      │   │
│ └─────────────────────────────────────────┘   │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 이동 추가 화면

```
┌─────────────────────────────────────────────────┐
│ 새 이동 추가                                     │
├─────────────────────────────────────────────────┤
│                                                 │
│ 캐릭터: [철수 ▼]                                │
│                                                 │
│ 위치 (터치하여 지정)              50%, 30%      │
│ ┌─────────────────────────────────────────┐   │
│ │                                         │   │
│ │        ┌─────────┐                      │   │
│ │        │  철수   │  ← 캐릭터 이름       │   │
│ │        └─────────┘                      │   │
│ │            ⭕  ← 위치 핀                │   │
│ │                                         │   │
│ │   [배경 이미지 + 격자]                  │   │
│ │                                         │   │
│ └─────────────────────────────────────────┘   │
│                                                 │
│ 시작 시간: 2.5초                                │
│ ──────●─────────────────────                  │
│ 0초                            10초            │
│                                                 │
│ 📊 대사 타임라인 (참고용)                       │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━                 │
│                                                 │
│ [취소]                         [추가]           │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 🎯 기본 사용법

### 1️⃣ 이동 목록 확인

이동 레이어 탭에 진입하면 현재 비트에 등록된 이동 목록이 표시됩니다.

**이동 카드 정보:**

```
┌─────────────────────────────────────┐
│ 철수 🚶 2.5초                   [×] │ ← 제거 버튼
│ 위치: (50%, 30%)                    │ ← 무대 좌표
│ 자동 걷기 애니메이션                 │ ← 애니메이션 상태
└─────────────────────────────────────┘
```

**카드 색상:**

- 🟪 연보라색 배경: 이동 항목 (primaryContainer)

**정보 구성:**

- **캐릭터 이름 + 🚶**: 누가 이동하는지
- **시작 시간**: 몇 초에 이동이 시작되는지
- **위치 좌표**: 무대의 어느 위치로 이동하는지 (%)
- **자동 걷기**: 걷기 애니메이션 여부

**이동 제거:**

- 카드 우측 상단의 `×` 버튼 클릭
- 즉시 이동이 삭제됨

---

### 2️⃣ 이동 추가

#### Step 1: 이동 추가 버튼 클릭

```
┌─────────────────────────────────────┐
│        ➕ 이동 추가                 │
└─────────────────────────────────────┘
```

- 목록 하단의 "이동 추가" 버튼 클릭
- 인라인 편집기가 펼쳐짐

#### Step 2: 캐릭터 선택

```
캐릭터: [철수 ▼]
        ↓
┌─────────────────┐
│ ♂ 철수          │
│ ♀ 영희          │
│ ♂ 민수          │
└─────────────────┘
```

- 드롭다운 클릭하여 캐릭터 선택
- 성별 아이콘(♂/♀)과 함께 표시
- 등장인물 섹션에 등록된 캐릭터만 선택 가능

#### Step 3: 위치 지정 (미니맵)

```
┌─────────────────────────────────────┐
│                                     │
│        ┌─────────┐                  │
│        │  철수   │  ← 선택한 캐릭터 │
│        └─────────┘                  │
│            ⭕  ← 터치로 이동        │
│                                     │
│   [배경 이미지]                     │
│                                     │
└─────────────────────────────────────┘
```

- 미니맵을 **터치**하여 위치 지정
- 보라색 핀(⭕)이 터치한 위치로 이동
- 우측 상단에 좌표(%)가 실시간 표시

#### Step 4: 시작 시간 조절

```
시작 시간: 2.5초
──────●─────────────────────
0초                      10초
```

- 슬라이더를 드래그하여 시작 시간 설정
- 범위: 0초 ~ 10초
- 0.1초 단위로 조절 가능

#### Step 5: 추가 확정

```
[취소]                  [추가]
```

- **[추가]** 버튼: 이동 등록 (캐릭터 선택 필수)
- **[취소]** 버튼: 편집 취소, 목록으로 돌아감

---

## 🗺️ 미니맵 사용법

### 미니맵 구성

```
┌─────────────────────────────────────┐
│  격자선  │  격자선  │                │
│         │         │                │
│─────────┼─────────┼────────        │ ← 3×3 격자
│         │         │                │
│     ┌───────┐     │                │
│     │ 철수  │     │                │ ← 캐릭터 버블
│     └───────┘     │                │
│         ⭕        │                │ ← 위치 핀
│─────────┼─────────┼────────        │
│         │         │                │
│         │         │                │
└─────────────────────────────────────┘
```

### 주요 요소

#### 1. **배경 이미지**

- 현재 비트의 장소 배경 표시
- StageView와 동일한 배경 사용
- 300dp 높이, 16dp 둥근 모서리
- 실제 무대 미리보기

#### 2. **반투명 오버레이**

- 검정색 30% 투명도
- 핀과 격자를 잘 보이게 함

#### 3. **3×3 격자선**

- 회색 30% 투명도
- 위치 선택 가이드
- 9등분 영역 구분

```
┌─────┬─────┬─────┐
│ 왼위 │ 중위 │ 우위 │
├─────┼─────┼─────┤
│ 왼중 │ 중중 │ 우중 │  ← 주요 위치 참고
├─────┼─────┼─────┤
│ 왼아래│중아래│우아래│
└─────┴─────┴─────┘
```

#### 4. **캐릭터 이름 버블**

- 보라색 배경 (primary 색상)
- 흰색 굵은 텍스트
- 4dp 그림자 효과
- 선택한 캐릭터 이름 표시

```
┌─────────┐
│  철수   │  ← 작은 버블
└─────────┘
```

#### 5. **위치 핀 (⭕)**

- 보라색 원 (20dp 반지름)
- 흰색 중심점 (3dp 반지름)
- 터치한 위치에 표시
- 드래그 가능

#### 6. **좌표 표시**

```
위치 (터치하여 지정)    50%, 30%
                        ↑
                     실시간 업데이트
```

- 우측 상단에 백분율로 표시
- X축: 좌우 (0% = 왼쪽, 100% = 오른쪽)
- Y축: 상하 (0% = 위, 100% = 아래)

### 터치 인터랙션

```
터치 제스처:
┌─────────────────────────────────────┐
│                                     │
│    👆 여기를 터치                    │
│         ↓                           │
│        ⭕ 핀이 이동                 │
│                                     │
└─────────────────────────────────────┘

드래그 제스처:
┌─────────────────────────────────────┐
│        ⭕                           │
│         ↓ 👆 드래그                 │
│         ↓                           │
│            ⭕                       │
└─────────────────────────────────────┘
```

### 위치 선택 팁

**일반적인 위치:**

```
센터 (50%, 50%):
- 무대 정중앙
- 주인공 등장

왼쪽 (20%, 50%):
- 무대 왼쪽 1/4 지점
- 대화 상대 A

오른쪽 (80%, 50%):
- 무대 오른쪽 1/4 지점
- 대화 상대 B

앞쪽 (50%, 70%):
- 무대 앞쪽 (카메라에 가까움)
- 강조 효과

뒤쪽 (50%, 30%):
- 무대 뒤쪽 (카메라에 멀리)
- 배경 인물
```

---

## ⏱️ 타임라인 참고

### 대사 타임라인 표시

이동 추가 시 현재 비트의 대사 타임라인이 참고용으로 표시됩니다.

```
📊 대사 타임라인 (참고용)
━━━━━━━━━━━━━━━━━━━━━━━━━━━
  철수   영희      철수
  ━━━   ━━━━━   ━━━━
0s  2s  4s    7s 9s  12s
        ↑
     이동 시간을 여기에 맞추면
     대사 전환과 동시에 이동
```

**활용 방법:**

1. 대사가 시작되기 직전에 이동 설정
2. 대사 중간에 위치 변경
3. 대사 끝난 후 퇴장 이동

**예시:**

```
시나리오:
- 0~2초: 철수 대사 "안녕?"
- 2초: 철수가 중앙으로 이동
- 2~5초: 영희 대사 "어, 안녕!"
- 5초: 영희가 철수 옆으로 이동
```

---

## 💡 팁과 요령

### 1. 자연스러운 이동 타이밍

**좋은 예:**

```
대사 흐름:
철수 (0~2s): "안녕하세요."
[2s] 철수 이동: 중앙 → 오른쪽
영희 (3~5s): "네, 안녕하세요!"
[5s] 영희 이동: 왼쪽 → 중앙
```

- 대사 직후 이동
- 약 0.5~1초 간격 두기
- 다음 대사 시작 전 도착

**피해야 할 예:**

```
대사 흐름:
철수 (0~2s): "안녕하세요."
[0.5s] 철수 이동  ← ❌ 대사 중 이동 (어색함)
```

### 2. 이동 거리 고려

```
짧은 거리 (근처):
- 타이밍: 빠르게 (0.3~0.5초 소요)
- 예: 중앙(50%) → 중우(65%)

중간 거리:
- 타이밍: 보통 (0.5~1초 소요)
- 예: 왼쪽(20%) → 중앙(50%)

긴 거리 (대각선):
- 타이밍: 느리게 (1~2초 소요)
- 예: 좌상단(20%, 30%) → 우하단(80%, 70%)
```

### 3. 캐릭터 간 간격 유지

```
좋은 배치:
┌─────────────────────────────────────┐
│                                     │
│    👦         👧                    │
│   (30%)      (70%)                  │
│                                     │
└─────────────────────────────────────┘
→ 40% 간격 (적절한 대화 거리)

피해야 할 배치:
┌─────────────────────────────────────┐
│                                     │
│      👦👧                           │
│    (48%)(52%)                       │
│                                     │
└─────────────────────────────────────┘
→ 4% 간격 (너무 가까움, 겹쳐 보임)
```

**권장 간격:**

- 대화 상황: 30~50% 간격
- 독백 상황: 중앙 단독 배치
- 그룹 대화: 고르게 분산 (25%, 50%, 75%)

### 4. 등장/퇴장 연출

**등장 (Entrance):**

```
시작 위치: 무대 밖 (x: -10% 또는 110%)
         ↓ 이동 (0.5~1초)
등장 위치: 무대 안 (x: 10% 또는 90%)

예:
- 0초: 철수 이동 (-10%, 50%) → (20%, 50%)
- 1초: 철수 대사 "도착했다!"
```

**퇴장 (Exit):**

```
현재 위치: 무대 안 (x: 30%)
         ↓ 이동 (1~1.5초)
퇴장 위치: 무대 밖 (x: -10%)

예:
- 10초: 철수 대사 "잘 가!"
- 11초: 철수 이동 (30%, 50%) → (-10%, 50%)
```

### 5. 자동 걷기 애니메이션

현재 이동 시 **자동으로** 걷기 애니메이션이 적용됩니다.

```
이동 중:
- 캐릭터가 자연스럽게 걷는 동작
- 이동 방향으로 자동 회전
- 도착 시 애니메이션 종료

정지 중:
- 기본 서 있는 자세
- Idle 애니메이션
```

**주의사항:**

- 이동 시간이 너무 짧으면 애니메이션이 부자연스러울 수 있음
- 최소 0.5초 이상의 이동 시간 권장

### 6. 복수 이동 조합

한 비트 내에 여러 이동을 조합할 수 있습니다.

**예시: 3인 대화**

```
0s  철수 등장: (-10%, 50%) → (25%, 50%)
2s  영희 등장: (110%, 50%) → (75%, 50%)
4s  민수 등장: (50%, 0%) → (50%, 60%)
6s  철수 이동: (25%, 50%) → (50%, 40%)  ← 중앙으로
8s  영희 이동: (75%, 50%) → (80%, 60%)  ← 뒤로 물러남
```

### 7. 미니맵 vs 수동 입력

**미니맵 사용 (추천):**

- ✅ 시각적으로 직관적
- ✅ 배경과 함께 확인 가능
- ✅ 빠른 위치 지정
- ✅ 격자선으로 정렬 쉬움

**수동 좌표 입력 (현재 미지원):**

- 정확한 좌표 필요 시
- 대칭 배치 시
- 향후 추가 예정

### 8. 실시간 미리보기

미니맵은 실제 무대와 동일한 비율과 배경을 사용합니다.

```
미니맵 (300dp 높이):
┌─────────────────────────────────────┐
│   [실제 배경 이미지]                 │
│   ⭕ 여기                            │
└─────────────────────────────────────┘
       ↓
실제 무대 (300dp 높이):
┌─────────────────────────────────────┐
│   [동일한 배경]                      │
│   👦 정확히 같은 위치               │
└─────────────────────────────────────┘
```

**확인사항:**

- 배경이 같은지 확인
- 핀 위치가 캐릭터가 서 있을 위치인지 확인
- 다른 캐릭터와 겹치지 않는지 확인

---

## ❓ FAQ

### Q1. 이동이 재생되지 않아요

**A:** 다음을 확인하세요:

- 캐릭터가 등장인물에 등록되어 있는지
- 시작 시간이 비트 재생 시간 내에 있는지
- 좌표가 유효한 범위(0~100%)인지

### Q2. 이동 속도를 조절하고 싶어요

**A:** 현재는 자동 계산됩니다.

- 이동 거리에 따라 속도 자동 조절
- 향후 속도 옵션 추가 예정

### Q3. 대각선 이동이 어색해요

**A:** 중간 경유지를 추가하세요:

```
직접 이동 (어색):
(10%, 10%) ──────→ (90%, 90%)

경유지 사용 (자연스러움):
(10%, 10%) → (50%, 50%) → (90%, 90%)
        ↑ 2개의 이동으로 분리
```

### Q4. 이동 순서를 바꾸고 싶어요

**A:** 현재는 삭제 후 재추가해야 합니다.

- 기존 이동 삭제 (`×` 버튼)
- 새로운 시간으로 다시 추가
- 향후 드래그 정렬 기능 추가 예정

### Q5. 다른 비트의 이동을 복사하고 싶어요

**A:** 현재는 수동으로 재입력해야 합니다.

- 좌표를 메모해두고 다른 비트에서 입력
- 향후 복사/붙여넣기 기능 추가 예정

---

## 🎓 학습 예제

### 예제 1: 간단한 등장

**상황**: 철수가 무대 왼쪽에서 등장

**단계**:

1. 이동 추가 클릭
2. 캐릭터: 철수 선택
3. 위치: 미니맵 왼쪽 1/4 지점 터치 (20%, 50%)
4. 시작 시간: 0초
5. 추가 버튼 클릭

**결과**:

- 비트 시작과 동시에 철수가 왼쪽에 나타남

### 예제 2: 대화 중 이동

**상황**: 대화 중 철수가 영희에게 다가감

**비트 구성**:

- 0~2초: 철수 대사 "영희야!"
- 2~4초: 영희 대사 "왜?"
- 4~6초: 철수 대사 "들어봐"

**이동 설정**:

1. 이동 추가
2. 캐릭터: 철수
3. 위치: 영희 근처 (65%, 50%)
4. 시작 시간: 2초 ← 철수 대사 끝나고
5. 추가

**결과**:

- 2초에 철수가 이동 시작
- 3초쯤 영희 옆에 도착
- 4초에 가까운 거리에서 대사

### 예제 3: 삼각 대치 구도

**상황**: 3명이 삼각형 배치로 대치

**배치**:

- 철수: 상단 중앙 (50%, 30%)
- 영희: 하단 왼쪽 (30%, 70%)
- 민수: 하단 오른쪽 (70%, 70%)

**이동 설정**:

1. 철수 이동 (0초): (50%, 30%)
2. 영희 이동 (1초): (30%, 70%)
3. 민수 이동 (2초): (70%, 70%)

**결과**:

```
        철수
       /   \
     영희   민수
```

---

## 📚 관련 문서

- [비트 편집 가이드](./BEAT_EDITOR_GUIDE.md)
- [대사 편집 가이드](./DIALOGUE_EDITOR_GUIDE.md)
- [장소 편집 가이드](./LOCATION_EDITOR_GUIDE.md)
- [시나리오 저장 가이드](./SAVE_SCENARIO_GUIDE.md)

---

**작성일:** 2024  
**버전:** 1.0  
**앱 버전:** CuteStage v1.0
